# 🔐 管理员密码保护功能

## 功能概述
为了保护1602 Lucky Draw应用的管理功能，右上角的三个管理工具按钮现在需要密码验证才能使用。

## 受保护的功能

### 📊 数据导出按钮 (蓝色)
- **功能**: 导出活动数据为JSON格式
- **密码保护**: ✅ 需要验证
- **用途**: 备份用户数据和抽奖记录

### 🔍 全屏模式按钮 (紫色)
- **功能**: 切换全屏显示模式
- **密码保护**: ✅ 需要验证
- **用途**: 大屏幕展示，适合户外活动

### ⚙️ 管理后台按钮 (红色)
- **功能**: 打开管理后台页面
- **密码保护**: ✅ 需要验证
- **用途**: 用户管理、设置配置

## 密码信息

### 默认密码
```
密码: 1602
```

### 安全特性
- **会话有效期**: 密码验证成功后5分钟内有效
- **自动过期**: 5分钟后需要重新输入密码
- **错误提示**: 密码错误时会显示提示信息
- **取消操作**: 点击取消不会执行相应功能

## 使用流程

1. **点击任意管理按钮**
   - 系统会弹出密码输入框

2. **输入密码**
   - 输入密码: `1602`
   - 点击确定

3. **验证成功**
   - 密码正确：执行相应功能
   - 密码错误：显示错误提示，不执行功能

4. **会话管理**
   - 验证成功后5分钟内，再次点击按钮无需重新输入密码
   - 5分钟后会话过期，需要重新验证

## 安全建议

### 密码修改
如需修改密码，请编辑 `index.html` 文件中的以下代码：
```javascript
const ADMIN_PASSWORD = "1602";  // 修改此处的密码
```

### 会话时间调整
如需调整密码有效期，请修改以下代码：
```javascript
setTimeout(() => {
    isPasswordVerified = false;
}, 5 * 60 * 1000);  // 5分钟 = 5 * 60 * 1000毫秒
```

## 技术实现

### 密码验证函数
```javascript
function verifyPassword(action) {
    if (isPasswordVerified) {
        return true;  // 已验证，直接通过
    }

    const password = prompt("请输入管理员密码：");
    if (password === ADMIN_PASSWORD) {
        isPasswordVerified = true;
        // 5分钟后自动过期
        setTimeout(() => {
            isPasswordVerified = false;
        }, 5 * 60 * 1000);
        return true;
    } else if (password !== null) {
        alert("密码错误！");
    }
    return false;
}
```

### 功能保护
每个受保护的功能都会在执行前调用密码验证：
```javascript
function exportOfflineData() {
    if (!verifyPassword('export')) {
        return;  // 验证失败，直接返回
    }
    // 执行实际功能...
}
```

## 故障排除

### 常见问题

1. **密码输入正确但仍然失败**
   - 检查密码是否包含额外的空格
   - 确认密码区分大小写

2. **5分钟内仍要求输入密码**
   - 可能是页面刷新导致会话重置
   - 重新输入密码即可

3. **想要禁用密码保护**
   - 将每个函数中的密码验证代码注释掉
   - 或者将 `ADMIN_PASSWORD` 设置为空字符串

### 联系支持
如遇到技术问题，请联系开发团队进行支持。

---
*更新时间: ${new Date().toLocaleString('zh-CN')}*
*版本: v1.0*